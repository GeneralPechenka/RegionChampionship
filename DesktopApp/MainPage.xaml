<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="DesktopApp.MainPage">

    <Grid RowDefinitions="50,*">

        <!-- ВЕРХНЯЯ ПАНЕЛЬ -->
        <Grid Grid.Row="0" 
              ColumnDefinitions="auto,*,auto" 
              HeightRequest="50" 
              Padding="20,0,10,0">

            <Label Grid.Column="0" 
                   Text="Лого" 
                   FontSize="22" 
                   HorizontalTextAlignment="Center" 
                   VerticalOptions="Center"/>

            <!-- Блок пользователя -->
            <HorizontalStackLayout Grid.Column="2" 
                                   HeightRequest="50" 
                                   Spacing="10" 
                                   VerticalOptions="Center">

                <VerticalStackLayout Spacing="2">
                    <Label x:Name="UserNameLabel" 
                           Text="Автоматов А.А." 
                           FontSize="12" 
                           FontAttributes="Bold"/>
                    <Label x:Name="UserRoleLabel" 
                           Text="Администратор" 
                           FontSize="10"/>
                </VerticalStackLayout>

                <Button x:Name="UserMenuButton"
                        Text="▼"
                        BackgroundColor="Transparent"
                        WidthRequest="20"
                        HeightRequest="20"
                        FontSize="10"
                        TextColor="#666666"
                        VerticalOptions="Center"
                        Clicked="OnUserMenuButtonClicked"/>

            </HorizontalStackLayout>
        </Grid>

        <!-- ОСНОВНОЙ КОНТЕНТ -->
        <Grid x:Name="MainGrid" 
              ColumnDefinitions="200,*" 
              Grid.Row="1">

            <!-- ЛЕВОЕ МЕНЮ -->
            <VerticalStackLayout Grid.Column="0" 
                                BackgroundColor="#1D2127"
                                Spacing="0"
                                x:Name="MenuContainer">

                <Label Text="Навигация" 
                       TextColor="White" 
                       FontSize="18" 
                       FontAttributes="Bold"
                       Margin="20,30,20,20"/>

                <Button Text="Главная" 
                        BackgroundColor="Transparent"
                        TextColor="#BDC3C7"
                        HeightRequest="50"
                        FontSize="16"
                        Clicked="BtnClicked"
                        CornerRadius="0"/>

                <Button Text="Монитор ТА" 
                        BackgroundColor="Transparent"
                        TextColor="#BDC3C7"
                        HeightRequest="50"
                        FontSize="16"
                        Clicked="BtnClicked"
                        CornerRadius="0"/>

                <Button Text="Детальные отчеты" 
                        BackgroundColor="Transparent"
                        TextColor="#BDC3C7"
                        HeightRequest="50"
                        FontSize="16"
                        Clicked="BtnClicked"
                        CornerRadius="0"/>

                <Button Text="Учет ТМЦ" 
                        BackgroundColor="Transparent"
                        TextColor="#BDC3C7"
                        HeightRequest="50"
                        FontSize="16"
                        Clicked="BtnClicked"
                        CornerRadius="0"/>

                <Button Text="Администрирование" 
                        BackgroundColor="Transparent"
                        TextColor="#BDC3C7"
                        HeightRequest="50"
                        FontSize="16"
                        Clicked="BtnClicked"
                        CornerRadius="0"/>

            </VerticalStackLayout>

            <!-- ПРАВАЯ ОБЛАСТЬ -->
            <Grid Grid.Column="1" 
                  BackgroundColor="#F5F5F5">

                <!-- Панель с кнопкой меню -->
                <Grid BackgroundColor="Black" 
                      HeightRequest="60" 
                      ColumnSpacing="15" 
                      Padding="10,0,10,0" 
                      VerticalOptions="Start">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Button x:Name="MenuButton"
                            Text="☰"
                            Clicked="ToggleMenu"
                            BackgroundColor="Transparent"
                            WidthRequest="50"
                            HeightRequest="50"
                            Grid.Column="0"
                            TextColor="White"
                            FontSize="18"
                            HorizontalOptions="Start"
                            VerticalOptions="Center"/>

                    <Label x:Name="CompanyLabel" 
                           Text="ООО Торговые автоматы" 
                           FontSize="22" 
                           FontAttributes="Bold" 
                           HorizontalTextAlignment="Start"
                           VerticalTextAlignment="Center"
                           TextColor="White"
                           Grid.Column="1"/>

                    <Label x:Name="PageLabel" 
                           Text="Главная" 
                           FontSize="16"  
                           HorizontalOptions="End"
                           HorizontalTextAlignment="Center" 
                           VerticalTextAlignment="Center"
                           TextColor="White"
                           Grid.Column="1"/>

                </Grid>

            </Grid>

        </Grid>

        <!-- ВЫПАДАЮЩЕЕ МЕНЮ ПОЛЬЗОВАТЕЛЯ -->
        <Frame x:Name="UserDropdownMenu"
               BackgroundColor="White"
               CornerRadius="5"
               Padding="0"
               HasShadow="True"
               IsVisible="False"
               Opacity="0"
               Scale="0.9"
               HorizontalOptions="End"
               VerticalOptions="Start"
               Margin="0,55,10,0"
               WidthRequest="200">

            <VerticalStackLayout Spacing="0">

                <!-- Шапка с информацией -->
                <Frame BackgroundColor="#2C3E50" 
                       HeightRequest="60"
                       Padding="15"
                       >
                    <VerticalStackLayout Spacing="3">
                        <Label Text="Автоматов А.А." 
                               TextColor="White" 
                               FontSize="14"
                               FontAttributes="Bold"/>
                        <Label Text="Администратор" 
                               TextColor="#BDC3C7" 
                               FontSize="11"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Пункты меню -->
                <Button Text="Мой профиль"
                        BackgroundColor="White"
                        TextColor="#333333"
                        FontSize="13"
                        HeightRequest="45"
                        HorizontalOptions="Fill"
                        CornerRadius="0"
                        Padding="15,0"
                        Clicked="OnProfileClicked"/>

                <Button Text="Мои сессии"
                        BackgroundColor="White"
                        TextColor="#333333"
                        FontSize="13"
                        HeightRequest="45"
                        HorizontalOptions="Fill"
                        CornerRadius="0"
                        Padding="15,0"
                        Clicked="OnSessionsClicked"/>

                <!-- Разделитель -->
                <BoxView HeightRequest="1" 
                         BackgroundColor="#EEEEEE" 
                         Margin="10,5"/>

                <Button Text="Выход"
                        BackgroundColor="White"
                        TextColor="#E74C3C"
                        FontSize="13"
                        HeightRequest="45"
                        HorizontalOptions="Fill"
                        CornerRadius="0"
                        Padding="15,0"
                        Clicked="OnLogoutClicked"/>

            </VerticalStackLayout>
        </Frame>

    </Grid>

</ContentPage>